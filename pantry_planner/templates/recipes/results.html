{% extends "base.html" %}
{% block content %}
<h2>Recipe Results</h2>

<p><b>Selected ingredients:</b>
  {% if selected_names %}
    {{ selected_names|join(", ") }}
  {% else %}
    none
  {% endif %}
</p>

<form method="get" action="/recipes/search">
  <label>
    Match mode:
    <select name="match">
      <option value="any" {% if match_mode == 'any' %}selected{% endif %}>Partial (any selected ingredient)</option>
      <option value="all" {% if match_mode == 'all' %}selected{% endif %}>Strict (all selected ingredients)</option>
    </select>
  </label>
  <button type="submit">Update</button>
</form>

{% if message %}<p>{{ message }}</p>{% endif %}

<ul>
  {% for r in results %}
    <li>
      <a href="/recipes/{{ r.idMeal }}">{{ r.strMeal }}</a>
      {% if r.matched_count is defined %}
        - matched {{ r.matched_count }} ingredient{{ '' if r.matched_count == 1 else 's' }}
      {% endif %}
      {% if g.user %}
        <form method="post" action="/bookmarks/add/{{ r.idMeal }}" style="display:inline;">
          <button type="submit">Bookmark</button>
        </form>
      {% endif %}
    </li>
  {% endfor %}
</ul>
{% endblock %}
